= 我的 Vim 速查手册
:experimental:

== 基础概念

1. kbd:[h] kbd:[j] kbd:[k] kbd:[l] 指代左下上右四个方向


=== Text Object

Text Object 用来帮助你快速的选定一个文本片段，通常需要配合 `a`, `i` 作为前缀。

|===
|指令 |说明

|`w`
|由字母、数字、下划线组成的单词

|`W`
|由非空白字符组成的字符序列

|`s`
|句子，以 `.`，`?`， `!`，或者多个空白字符结尾的一句话

|`p`
|段落，空行之间的文字

|`[`,`]`,`(`,`)`,`{`,`}`,`'`,`"`,```
|由这些符号包裹的文字

|`b`, `B`
|相当于 `(`, `{`

|`t`
|由 XML 标签包裹的文字


|===

==== 选择文本对象

. `a` 表示 arround，总是会选择更多的文本
. `i` 表示 inner，总是会选择更少的文本
. 在上面两个指令后面加上 Text Object 指令就可以快速的进行选择

选中的 Text Object 只能用于 Visual Mode 或者 Operator 后面。


=== 范围 (Ranges)

范围可以帮助你快速的选定多行文本。

|===
|指令 |说明

|`42`
|第 42 行

|`1`
|第一行

|`$`
|最后一行

|`.`
|当前行

|`%`
|全部行

|`21,25`
|21 到 25 行，闭区间

|`.+1,$`
|下一行到末行

|`.,.+5`
|选定当前行跟接下来的 5 行

|`.,.5`
|`.5` 等同于 `.+5`

|``a,`b`
|选定标签 a 到标签 b 之间的内容，不能跟行号相关的指令混用

|===

== 移动

=== 跳转到

==== 行号 N

. `:N<Enter>`
. `Ngg`
. `NG`

== 选择

=== Visual 模式

|===
|快捷键 |作用

|kbd:[V]
|普通的 Visual 模式，逐字选择

|kbd:[Ctrl + V] 或 kbd:[Ctrl + Q]
|块状选择模式

|kdb:[Shift + V]
|整行选择，无法逐字选择

|===

==== 选中块的范围操作

|===
|按键 |作用

|kbd:[Shift + I{string}<ESC>]
|块级插入、删除一段字符，多用来批量插入行注释

|

|===

=== 选择 Text Object


== 移动文本

=== 移动连续整行到单一位置

|===
|指令 |说明

|`:m 12`
|移动到 12 行后面

|`:m 0`
|移动到第一行前

|`:m $`
|移动到最后一行后

|`:m `a`
|移动到标签 a 所在行后面

|`:m `a-1`
|移动到标签 a 所在行前一行

|`:range m line`
|移动某个范围中的文本到指定行后面

|===

=== 移动非连续整行

为什么不试试复制粘贴呢？


== 复制、剪切与粘贴

Vim 中没有 Copy，Cut 与 Paste。完成这两个常规操作需要先了解几个概念：

. register
. yank
. delete
. put

=== Register

通过 `"x` 可以在其他指令中引用寄存器 `x`

寄存器分为 9 种：

1. The unnamed register ""
2. 10 numbered registers "0 to "9
3. The small delete register "-
4. 26 named registers "a to "z or "A to "Z
5. four read-only registers ":, "., "% and "#
6. the expression register "=
7. The selection and drop registers "*, "+ and "~ 
8. The black hole register "_
9. Last search pattern register "/

. 匿名寄存器 ""，被 d, c, s, x, y 指令操作的文本，会自动存入匿名寄存器
. 10 个数字寄存器 "0 到 "9，当使用 y 指令的时候，会将已有的数字寄存器中的内容向后移动，并将被 yank 的文本放入 0 号寄存器，对于 d, c, s, x 来说，则会被放入 1 号寄存器
. 26 个命名寄存器 "a 到 "z 或 "A 到 "Z，为用户保留的寄存器，使用小写格式引用的时候会覆盖已有的内容，使用大写格式引用，则会向已有的内容追加
. 4 个只读寄存器 ": ". "% "#
.. ". 保存最后插入的字符
.. "% 保存当前文件名
.. "# 备选文件名
.. ": 最后执行的命令



|===
|指令 |说明

|``

|===

== 常用命令

=== 以 sudo 权限写入

[source,vim]
----
:w !sudo tee %
----

解释

. `w` 表示写入

. `!` 表示执行外部命令

. `sudo tee %`，% 表示当前文件名
